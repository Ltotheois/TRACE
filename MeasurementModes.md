# Measurement Modes

Currently the software provides the following seven measurement modes:
modes = ("classic", "dr", "dmdr", "dmdr_am", "dr_pufm", "tandem", "digital_dmdr")

Measurement modes have to be registered in the mod_devices.py file.
Register them by adding them to the global modes variable.

In the following, the modes are explained and the connection pattern is given.

## Classic

The classic measurement mode uses only the probe source.
The probe source is frequency modulated by a sine wave.
The signal for the FM is generated by the probe synthesizer and passed to the lock-in amplifier.
The lock-in amplifier uses 2f-demodulation to retrieve the signal.

### Connections

probe synthesizer LF -> lock-in REF IN

## DR

The dr measurement mode uses the probe and pump source.
The probe source is frequency modulated as described in the section [classic measurement mode](#Classic).
The pump source is used in constcontinuous waveform (cw) mode, meaning it has constant amplitude and frequency.

### Connections

probe synthesizer LF -> lock-in REF IN


## DMDR

The dmdr measurement mode uses the probe and pump source.
The probe source is frequency modulated as described in the section [classic measurement mode](#Classic).
The pump source is frequency modulated by a square function.
As a result the pump frequency is switching between being resonant and off-resonant.
This achieves almost the same effect as pulse modulating the pump source.
For the demodulation two lock-in amplifiers (or one lock-in amplifier with multiple channels) are required.
First the probe FM is demodulated in 2f-mode.
Then the second demodulation realises the difference spectrum.
Both synthesizers create their respective frequencies and these have to be passed to the lock-in amplifiers.

### Connections

probe synthesizer LF -> 1st lock-in REF IN
pump synthesizer LF -> 2nd lock-in REF IN

## DMDR AM
The dmdr_am measurement mode uses the probe and pump source.
The probe source is frequency modulated as described in the section [classic measurement mode](#Classic).
The pump source is amplitude modulated by a square function.
For the demodulation two lock-in amplifiers (or one lock-in amplifier with multiple channels) are required.
First the probe FM is demodulated than the second demodulation realises the difference spectrum.
Both synthesizers create their respective frequencies and these have to be passed to the lock-in amplifiers.

### Connections

probe synthesizer LF -> 1st lock-in REF IN
pump synthesizer LF -> 2nd lock-in REF IN

## DR PUFM
The dr_pufm measurement mode uses the probe and pump source.
The probe source is used in cw mode.
The pump source is frequency modulated by a sine wave.
The signal for the FM is generated by the pump synthesizer and passed to the lock-in amplifier.
The lock-in amplifier uses 2f-demodulation to retrieve the signal.

### Connections

pump synthesizer LF -> lock-in REF IN


## Tandem
The tandem measurement mode is similar to the [DMDR](#DMDR) measurement mode.
However, for the demodulation the detector signal is multiplied with a single frequency.
This frequency is the difference between the probe FM and the pump AM frequency.
For this measurement all three components (probe synthesizer, pump synthesizer, lock-in) have to be synchronized.
To realise this, the lock-in amplifier provides the reference signals for the probe and pump synthesizers.
The pump synthesizer is used in pulse modulation mode (this allows to use the TTL signal from the lock-in which is more convenient).

### Connections

lock-in Output -> probe synthesizer EXT1
lock-in TTL -> pump synthesizer EXT1


## Digital DMDR
The digital_dmdr measurement mode is similar to the [DMDR](#DMDR) measurement mode.
However, for the second demodulation is realised by measuring two points and calculating the difference on the computer.
Therefore, this mode uses the same connection pattern as the measurement mode [DR](#DR).

### Connections

probe synthesizer LF -> lock-in REF IN